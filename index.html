<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AI Policy Builder</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f5f5f5;
      color: #333;
    }
    .container {
      max-width: 900px;
      margin: 40px auto;
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1, h2, h3 {
      color: #005b96;
    }
    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }
    input[type="text"], select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 4px;
      margin-bottom: 12px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    textarea { height: 80px; }
    button {
      margin: 10px 5px 0 0;
      padding: 10px 18px;
      background-color: #005b96;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover { background-color: #003f6d; }
    .skip-btn { background-color: #999; }
    .skip-btn:hover { background-color: #777; }
    .info-icon {
      cursor: pointer;
      font-size: 1.2em;
      margin-left: 5px;
    }
    .policy-output {
      background: #f9f9f9;
      padding: 20px;
      border: 1px dashed #999;
      border-radius: 6px;
      max-height: 500px;
      overflow-y: auto;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      padding-top: 60px;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.6);
    }
    .modal-content {
      background: #fff;
      margin: auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%; max-width: 500px;
      border-radius: 8px;
      position: relative;
    }
    .close-btn {
      position: absolute; right: 15px; top: 10px;
      font-size: 20px; font-weight: bold; cursor: pointer;
    }
    .close-btn:hover { color: red; }
  </style>
</head>
<body>
  <div class="container">
    <h1>AI Policy Builder</h1>
    <p>Use this wizard to generate a detailed, robust AI policy that’s ready for internal use or quick review.</p>
    <div id="wizard"></div>
  </div>

  <div id="infoModal" class="modal">
    <div class="modal-content">
      <span id="closeModal" class="close-btn">✖️</span>
      <div id="modalText"></div>
    </div>
  </div>

  <script>
    const steps = [
      { id:'company', title:'Company Info', info:'Your company name, industry, jurisdiction & tone.', fields:['companyName','industry','jurisdiction','tone'] },
      { id:'scope', title:'Scope', info:'Who the policy applies to.', fields:['scope'] },
      { id:'definitions', title:'Definitions', info:'Include expanded definitions & appendix?', fields:['includeDefinitions'] },
      { id:'privacy', title:'Data Privacy & Security', info:'Data types, anonymization, secure environments.', fields:['personalData','tradeSecrets','financialData','anonymize','encryption'] },
      { id:'prohibited', title:'Prohibited Use Cases', info:'Select common prohibited uses + free-text.', fields:['prohibitedUses','customProhibited'] },
      { id:'approved', title:'Approved Use & Governance', info:'Approved tools, ethics & security reviews.', fields:['approvedTools','requireApproval'] },
      { id:'ip', title:'IP & Trade Secrets', info:'Ownership & protection of outputs.', fields:['ipOwnership','protectTradeSecrets'] },
      { id:'fairness', title:'Fairness & Bias', info:'Regular bias/fairness audits.', fields:['biasReview'] },
      { id:'compliance', title:'Compliance & Legal', info:'Select laws + export, code references.', fields:['laws','customLaws','codeReference'] },
      { id:'transparency', title:'Transparency & Explainability', info:'Public sharing & explainability.', fields:['publicDisclosure','explainability'] },
      { id:'training', title:'Training & Awareness', info:'Curriculum & acknowledgments.', fields:['training','acknowledgment'] },
      { id:'vendor', title:'Vendor Oversight', info:'Third-party AI vendor requirements.', fields:['vendorOversight'] },
      { id:'risk', title:'Risk Assessment', info:'Mandatory risk assessments.', fields:['riskAssessment'] },
      { id:'incidents', title:'Incident Reporting', info:'Process for AI security incidents.', fields:['incidentProcess'] },
      { id:'enforcement', title:'Enforcement', info:'Consequences for violations.', fields:['enforcement'] },
      { id:'communication', title:'Public Communication', info:'How you share AI practices.', fields:['publicComm'] },
      { id:'review', title:'Review & Updates', info:'Frequency & responsible team.', fields:['reviewFrequency','responsibleTeam'] },
      { id:'signoff', title:'Sign-off', info:'Require signatures?', fields:['signOff'] }
    ];
    const formData = {};
    let currentStep = 0;
    const wizardDiv = document.getElementById('wizard');
    const modal = document.getElementById('infoModal');
    const modalText = document.getElementById('modalText');
    const closeModal = document.getElementById('closeModal');

    function renderStep() {
      if (currentStep >= steps.length) return renderFinal();
      const s = steps[currentStep];
      let html = `<h2>${s.title}<span class="info-icon" onclick="showInfo('${s.info}')">ℹ️</span></h2>`;
      s.fields.forEach(f=> html += getFieldHTML(f));
      html += `<button onclick="prevStep()">Previous</button>
               <button onclick="nextStep()">Next</button>
               <button class="skip-btn" onclick="skipStep()">Skip</button>`;
      wizardDiv.innerHTML = html;
    }

    function getFieldHTML(f) {
      switch(f) {
        case 'companyName':
          return '<label>Company Name:</label><input type="text" id="companyName">';
        case 'industry':
          return `<label>Industry:</label><select id="industry">
            <option>-- Select --</option>
            <option>Healthcare / Medical</option><option>Financial Services</option>
            <option>Insurance</option><option>Legal / Compliance</option>
            <option>Education</option><option>Technology</option>
            <option>Manufacturing</option><option>Retail / E-commerce</option>
            <option>Other</option>
          </select>`;
        case 'jurisdiction':
          return '<label>Jurisdiction (e.g. New Jersey):</label><input type="text" id="jurisdiction">';
        case 'tone':
          return `<label>Tone:</label><select id="tone">
            <option value="formal">Formal Legal</option>
            <option value="plain">Plain Language</option>
          </select>`;
        case 'scope':
          return `<label>Applies to:</label>
            <select id="scope">
              <option value="all">All staff, contractors, interns & partners</option>
              <option value="employees">Employees only</option>
            </select>`;
        case 'includeDefinitions':
          return `<label>Include definitions & appendix?</label>
            <select id="includeDefinitions">
              <option value="yes">Yes</option><option value="no">No</option>
            </select>`;
        case 'personalData':
          return `<label><input type="checkbox" id="personalData"> Handle personal data</label>`;
        case 'tradeSecrets':
          return `<label><input type="checkbox" id="tradeSecrets"> Handle trade secrets</label>`;
        case 'financialData':
          return `<label><input type="checkbox" id="financialData"> Handle financial data</label>`;
        case 'anonymize':
          return `<label><input type="checkbox" id="anonymize"> Require anonymization/de-identification for training/testing</label>`;
        case 'encryption':
          return `<label>Require encryption & secure environments?</label>
            <select id="encryption"><option>Yes</option><option>No</option></select>`;
        case 'prohibitedUses':
          return `<label>Prohibited use cases:</label>
            <select id="prohibitedUses" multiple>
              <option>Uploading confidential data</option>
              <option>Automating hiring decisions</option>
              <option>Providing legal advice</option>
              <option>Medical or health advice</option>
              <option>Financial credit decisions</option>
              <option>Violating laws</option>
            </select>
            <label>Other (free text):</label>
            <textarea id="customProhibited"></textarea>`;
        case 'approvedTools':
          return `<label>Maintain approved-tools list?</label>
            <select id="approvedTools"><option>Yes</option><option>No</option></select>`;
        case 'requireApproval':
          return `<label>Require ethics/security reviews?</label>
            <select id="requireApproval"><option>Yes</option><option>No</option></select>`;
        case 'ipOwnership':
          return `<label>Outputs owned by company?</label>
            <select id="ipOwnership"><option>Yes</option><option>No</option></select>`;
        case 'protectTradeSecrets':
          return `<label>Emphasize trade-secret protection?</label>
            <select id="protectTradeSecrets"><option>Yes</option><option>No</option></select>`;
        case 'biasReview':
          return `<label>Require bias/fairness audits?</label>
            <select id="biasReview"><option>Yes</option><option>No</option></select>`;
        case 'laws':
          return `<label>Applicable laws:</label>
            <select id="laws" multiple>
              <option>GDPR</option><option>CCPA</option><option>HIPAA</option>
              <option>Quebec Law 25</option><option>PIPEDA</option>
            </select>
            <label>Other (free text):</label><textarea id="customLaws"></textarea>`;
        case 'codeReference':
          return `<label>Reference internal code/privacy policy?</label>
            <select id="codeReference"><option>Yes</option><option>No</option></select>`;
        case 'publicDisclosure':
          return `<label>Share policy publicly?</label>
            <select id="publicDisclosure"><option>Yes</option><option>No</option></select>`;
        case 'explainability':
          return `<label>Require explainability?</label>
            <select id="explainability"><option>Yes</option><option>No</option></select>`;
        case 'training':
          return `<label>Mandatory training?</label>
            <select id="training"><option>Yes</option><option>No</option></select>`;
        case 'acknowledgment':
          return `<label>Require policy acknowledgment?</label>
            <select id="acknowledgment"><option>Yes</option><option>No</option></select>`;
        case 'vendorOversight':
          return `<label>Vendor compliance requirements?</label>
            <select id="vendorOversight"><option>Yes</option><option>No</option></select>`;
        case 'riskAssessment':
          return `<label>Mandatory risk assessments?</label>
            <select id="riskAssessment"><option>Yes</option><option>No</option></select>`;
        case 'incidentProcess':
          return `<label>Incident reporting process?</label>
            <select id="incidentProcess"><option>Yes</option><option>No</option></select>`;
        case 'enforcement':
          return `<label>Specify disciplinary consequences?</label>
            <select id="enforcement"><option>Yes</option><option>No</option></select>`;
        case 'publicComm':
          return `<label>Public communications?</label>
            <select id="publicComm"><option>Yes</option><option>No</option></select>`;
        case 'reviewFrequency':
          return `<label>Review frequency:</label>
            <select id="reviewFrequency"><option>Annually</option><option>Semi-annually</option><option>As needed</option></select>`;
        case 'responsibleTeam':
          return `<label>Responsible review team:</label><input type="text" id="responsibleTeam">`;
        case 'signOff':
          return `<label>Require sign-off?</label>
            <select id="signOff"><option>Yes</option><option>No</option></select>`;
        default:
          return '';
      }
    }

    function saveStepData() {
      steps[currentStep].fields.forEach(f=>{
        const el=document.getElementById(f);
        if(!el) return;
        if(el.type==='checkbox') formData[f]=el.checked;
        else if(el.multiple) formData[f]=[...el.selectedOptions].map(o=>o.value);
        else formData[f]=el.value;
      });
    }
    function nextStep(){ saveStepData(); currentStep++; renderStep(); }
    function prevStep(){ currentStep--; renderStep(); }
    function skipStep(){ currentStep++; renderStep(); }
    function showInfo(txt){ modalText.innerHTML=txt; modal.style.display='block'; }
    closeModal.onclick=()=>modal.style.display='none';
    window.onclick=e=>{ if(e.target==modal) modal.style.display='none'; };

    function renderFinal() {
      const formal = formData.tone==='formal';
      let p=`<h2>${formData.companyName||'[Company Name]'} AI Policy</h2>`;
      p+=`<p><strong>Industry:</strong> ${formData.industry||'General'}<br>
           <strong>Jurisdiction:</strong> ${formData.jurisdiction||'[Jurisdiction]'}</p>`;

      // Intro
      p+=`<h3>Introduction & Purpose</h3>`;
      p+= formal
        ? `<p>This policy sets forth rigorous guidelines for ethical, secure, and legally compliant AI use within ${formData.companyName||'the Company'}. It affirms our commitment to protecting personal data, preserving trade secrets, and maintaining public trust under the laws of ${formData.jurisdiction||'[Jurisdiction]'}. All personnel must adhere to these standards.</p>`
        : `<p>This policy explains how ${formData.companyName||'our company'} uses AI responsibly and safely, protects data, follows applicable laws in ${formData.jurisdiction||'[Jurisdiction]'}, and keeps customer trust. Everyone must follow these rules.</p>`;

      // Scope
      p+=`<h3>Scope</h3>`;
      p+= formData.scope==='employees'
        ? `<p>This policy applies to all employees using AI tools.</p>`
        : `<p>This policy applies to employees, contractors, interns, and partners who use AI tools.</p>`;

      // Definitions
      if(formData.includeDefinitions==='yes'){
        p+=`<h3>Definitions</h3>
        <p><strong>AI:</strong> Machine systems that perform tasks requiring human-like intelligence.</p>
        <p><strong>Machine Learning:</strong> Algorithms that learn from data.</p>
        <p><strong>LLMs:</strong> Large Language Models like ChatGPT.</p>
        <p><strong>Personal Data:</strong> Info that can identify an individual.</p>
        <p><strong>Trade Secrets:</strong> Confidential business info giving competitive advantage.</p>
        <p><strong>Bias & Fairness:</strong> Ensuring AI is equitable and nondiscriminatory.</p>`;
      }

      // Data Privacy & Security
      if(formData.personalData||formData.tradeSecrets||formData.financialData){
        p+=`<h3>Data Privacy & Security</h3><ul>`;
        if(formData.personalData) p+=`<li>We protect personal data and never share it with public AI systems without explicit authorization.</li>`;
        if(formData.tradeSecrets) p+=`<li>We secure trade secrets and never disclose them to unauthorized AI or third parties.</li>`;
        if(formData.financialData) p+=`<li>Financial data is managed under strict compliance protocols.</li>`;
        if(formData.anonymize) p+=`<li>All data used for AI training/testing must be de-identified or anonymized.</li>`;
        if(formData.encryption) p+=`<li>Encryption and secure environments are mandatory for all AI data handling.</li>`;
        p+=`</ul>`;
      }

      // Prohibited
      p+=`<h3>Prohibited Use Cases</h3><ul>`;
      (formData.prohibitedUses||[]).forEach(u=>p+=`<li>${u}</li>`);
      if(formData.customProhibited) p+=`<li>${formData.customProhibited}</li>`;
      p+=`</ul>`;

      // Approved & Governance
      p+=`<h3>Approved Use & Governance</h3>`;
      p+=formData.approvedTools==='Yes'
        ? `<p>Only approved AI tools may be used.</p>`
        : `<p>No approved-tools list maintained.</p>`;
      p+=formData.requireApproval==='Yes'
        ? `<p>New AI tools require formal security, privacy & ethics review prior to use.</p>`
        : `<p>No pre-approval process is required at this time.</p>`;

      // IP & Trade Secrets
      p+=`<h3>Intellectual Property & Trade Secrets</h3>`;
      p+=formData.ipOwnership==='Yes'
        ? `<p>AI outputs are company-owned IP.</p>`
        : `<p>AI outputs ownership is not guaranteed.</p>`;
      p+=formData.protectTradeSecrets==='Yes'
        ? `<p>Employees must safeguard trade secrets per confidentiality agreements.</p>`
        : `<p>Standard confidentiality obligations apply.</p>`;

      // Fairness & Bias
      p+=`<h3>Fairness & Bias Mitigation</h3>`;
      p+=formData.biasReview==='Yes'
        ? `<p>Regular bias/fairness audits are required.</p>`
        : `<p>No formal audits required.</p>`;

      // Compliance & Legal
      p+=`<h3>Compliance & Legal</h3><ul>`;
      (formData.laws||[]).forEach(l=>p+=`<li>Comply with ${l}</li>`);
      if(formData.customLaws) p+=`<li>${formData.customLaws}</li>`;
      p+=`</ul>`;
      p+=formData.codeReference==='Yes'
        ? `<p>This aligns with our code of conduct & privacy policy.</p>`
        : `<p>No code of conduct reference included.</p>`;
      p+=`<p>Export controls and international regulations (e.g. U.S. EAR/ITAR) must be followed.</p>`;
      p+=`<p>Governed under the laws of ${formData.jurisdiction||'[Jurisdiction]'}.`;
      
      // Transparency
      p+=`<h3>Transparency & Explainability</h3>`;
      p+=formData.publicDisclosure==='Yes'
        ? `<p>AI practices are publicly disclosed for accountability.</p>`
        : `<p>AI practices are not publicly disclosed.</p>`;
      p+=formData.explainability==='Yes'
        ? `<p>Employees must explain AI decisions upon request.</p>`
        : `<p>No explainability requirement externally.</p>`;

      // Training
      p+=`<h3>Training & Awareness</h3>`;
      p+=formData.training==='Yes'
        ? `<p>Mandatory training on AI ethics, security, data privacy, bias mitigation, approved vs prohibited use.</p>`
        : `<p>Training is optional.</p>`;
      p+=formData.acknowledgment==='Yes'
        ? `<p>Employees must formally acknowledge this policy.</p>`
        : `<p>No formal acknowledgment required.</p>`;

      // Vendor Oversight
      p+=`<h3>Vendor & Third-party Oversight</h3>`;
      p+=formData.vendorOversight==='Yes'
        ? `<p>Vendors must meet our security, privacy & ethical standards before engagement.</p>`
        : `<p>No explicit vendor compliance rules.</p>`;

      // Risk Assessment
      p+=`<h3>Risk Assessment</h3>`;
      p+=formData.riskAssessment==='Yes'
        ? `<p>Pre-deployment risk assessments are mandatory to evaluate legal, ethical & operational impacts.</p>`
        : `<p>No formal risk assessment process.</p>`;

      // Incident Reporting
      p+=`<h3>Incident Reporting & Response</h3>`;
      p+=formData.incidentProcess==='Yes'
        ? `<p>A defined process addresses AI misuse, data breaches & security incidents.</p>`
        : `<p>No AI-specific incident process defined.</p>`;

      // Enforcement
      p+=`<h3>Enforcement</h3>`;
      p+=formData.enforcement==='Yes'
        ? `<p>Violations may result in disciplinary action up to termination and legal consequences.</p>`
        : `<p>No specific enforcement actions detailed.</p>`;

      // Public Communication
      p+=`<h3>Public Communication</h3>`;
      p+=formData.publicComm==='Yes'
        ? `<p>We share AI governance updates through official channels and reports.</p>`
        : `<p>No public AI governance communications.</p>`;

      // Review & Updates
      p+=`<h3>Review & Updates</h3>`;
      p+=`<p>Reviewed ${formData.reviewFrequency||'annually'} for compliance & best practices.</p>`;
      p+=formData.responsibleTeam
        ? `<p>Review overseen by: ${formData.responsibleTeam}.</p>`
        : `<p>Designated governance team oversees reviews.</p>`;

      // Sign-off
      p+=`<h3>Sign-off & Acknowledgment</h3>`;
      p+=formData.signOff==='Yes'
        ? `<p>Employees must sign or formally acknowledge before engaging AI.</p>`
        : `<p>No formal sign-off required.</p>`;

      // Appendix
      if(formData.includeDefinitions==='yes'){
        p+=`<h3>Appendix: Definitions & Examples</h3>
        <ul>
          <li><strong>Example AI systems:</strong> Chatbots, automated review tools, fraud detectors.</li>
          <li><strong>Example personal data:</strong> Names, emails, health records.</li>
          <li><strong>Example trade secrets:</strong> Proprietary algorithms, non-public designs.</li>
        </ul>`;
      }

      p+=`<hr><p><em>Generated with AI Policy Builder. Review with legal & compliance teams. No liability assumed.</em></p>`;

      wizardDiv.innerHTML = `<h2>Preview & Copy</h2>
        <div class="policy-output">${p}</div>
        <button onclick="copyRichText()">Copy to Clipboard</button>`;
    }

    function copyRichText() {
      const div = document.querySelector('.policy-output');
      const rng = document.createRange();
      rng.selectNode(div);
      window.getSelection().removeAllRanges();
      window.getSelection().addRange(rng);
      document.execCommand('copy');
      window.getSelection().removeAllRanges();
      alert('Formatted policy copied to clipboard!');
    }

    renderStep();
  </script>
</body>
</html>
